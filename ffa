setclipboard("https://discord.gg/yabu")

local lp = game:GetService("Players").LocalPlayer
local pGui = lp:WaitForChild("PlayerGui")
local HttpService = game:GetService("HttpService")
local TeleportService = game:GetService("TeleportService")


local JEW_LIMIT = 200 
local MIN_NIGGERS = 7
local PLACE_ID = game.PlaceId

setclipboard("https://discord.gg/ZbKkP2X7ps")

local function Notify(text)
    local sg = Instance.new("ScreenGui")
    sg.Name = "DiscordInviteGui"
    sg.Parent = pGui
    local frame = Instance.new("TextLabel", sg)
    frame.Size = UDim2.new(0, 280, 0, 60)
    frame.Position = UDim2.new(1, -300, 1, -100) 
    frame.Text = text
    frame.TextColor3 = Color3.fromRGB(255, 255, 255)
    frame.Font = Enum.Font.GothamBold
    frame.TextSize = 14
    frame.Transparency = 0.1
    frame.BackgroundColor3 = Color3.fromRGB(180, 180, 180)
    task.spawn(function()
        task.wait(3)
        sg:Destroy()
    end)
end

local fullServerBlacklist = {}
fullServerBlacklist[game.JobId] = true 

local function Hop(reason)
    print("!! TRIGGERED !! Reason: " .. reason)
    pcall(function() TeleportService:SetTeleportGui(Instance.new("ScreenGui")) end)

    local function fetchAndTeleport()
        local url = 'https://games.roblox.com/v1/games/' .. PLACE_ID .. '/servers/Public?sortOrder=Desc&limit=100'
        local success, result = pcall(function()
            return HttpService:JSONDecode(game:HttpGet(url))
        end)

        if success and result and result.data then
            for _, s in pairs(result.data) do
                if s.id ~= game.JobId and not fullServerBlacklist[s.id] and tonumber(s.playing) < tonumber(s.maxPlayers) then
                    print("Attempting join: " .. s.id)
                    local tpSuccess = pcall(function()
                        TeleportService:TeleportToPlaceInstance(PLACE_ID, s.id, lp)
                    end)
                    if not tpSuccess then
                        fullServerBlacklist[s.id] = true
                        task.wait(0.5)
                    else
                        task.wait(5)
                    end
                end
            end
        end
        return false
    end

    while true do
        fetchAndTeleport()
        task.wait(3)
    end
end


task.spawn(function()
    task.wait(15) 
    while true do
        task.wait(2)
        local activePlayers = #game:GetService("Players"):GetPlayers()
        local jewFound = false
        
        for _, v in pairs(pGui:GetDescendants()) do
            if v:IsA("TextLabel") and v.Visible then
                local cleanText = v.Text:gsub("%D", "")
                local val = #cleanText > 0 and tonumber(cleanText)
                
                if val and val >= JEW_LIMIT then
                    -- Ignore labels that are just ping
                    if not v.Name:lower():find("ping") and not v.Parent.Name:lower():find("ping") then
                        jewFound = true
                    end
                end
            end
        end
        
        print("Status: " .. activePlayers .. " players. Score Trigger: " .. tostring(jewFound))
        
        if jewFound then
            Hop("Score limit reached.")
            break
        elseif activePlayers < MIN_NIGGERS then
            Hop("Server too empty (" .. activePlayers .. " players).")
            break
        end
    end
end)


task.spawn(function()
    while true do
        task.wait(0.5)
        local found = false
        
        for _, v in pairs(pGui:GetDescendants()) do
            
            if v:IsA("TextLabel") and string.find(v.Text, "Join this game!") then
                local btn = v.Parent:FindFirstChildOfClass("ImageButton") or v.Parent:FindFirstChildOfClass("TextButton") or v:FindFirstAncestorOfClass("ImageButton")
                if btn then
                    pcall(function()
                        for _, conn in pairs(getconnections(btn.MouseButton1Click)) do
                            conn:Fire()
                        end
                        btn:Activate()
                    end)
                    found = true
                    break
                end
            end
            
            
            if v:IsA("TextLabel") and v.Text:find("Free For All") and v.Visible then
                local ffa = v:FindFirstAncestorOfClass("GuiButton") or v.Parent:FindFirstChildOfClass("GuiButton")
                if ffa then ffa:Activate() end
            end
        end
        
        
        if not found then
            for _, b in pairs(pGui:GetDescendants()) do
                if b:IsA("ImageButton") and b.ImageColor3 == Color3.fromRGB(155, 255, 0) then
                    b:Activate()
                    break
                end
            end
        end
    end
end)

Notify("Script loaded, discord copied to clipboard")
